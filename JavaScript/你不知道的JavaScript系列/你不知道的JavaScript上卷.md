### 作用域与闭包

>尽管我曾经一度非常热爱制作东 西，但是现在却更渴望了解事物的运行原理。

>我经常寻找解决问题或修复 bug 的最佳方 法，却很少花时间来研究我所使用的工具。

1.1 编译原理

>Js事实上它是一门编译语言,但与传统的编译语言不同，它不是提前编译的，编译结果也不能在分布式系 统中进行移植。
尽管如此，JavaScript 引擎进行编译的步骤和传统的编译语言非常相似，在某些环节可能 比预想的要复杂:
- 分词/词法分析（Tokenizing/Lexing）

- 解析/语法分析（Parsing）
将`词法单元流（数组）`转换成一个由元素逐级嵌套所组成的`代表了程序语法结构的树`-“抽象语法树”（Abstract Syntax Tree，AST）。 

- 代码生成
将 `AST`转换为可执行代码的过程称被称为代码生成。
>抛开具体细节，简单来说就是有某种方法可以将 var a = 2; 的 AST 转化为一组机器指 令，用来创建一个叫作 a 的变量（包括分配内存等），并将一个值储存在 a 中。


比起那些编译过程只有三个步骤的语言的编译器，`JavaScript` 引擎要复杂得多。例如，在 语法分析和代码生成阶段有特定的步骤来对运行性能进行优化，包括对冗余元素进行优化 等。

>首先，JavaScript 引擎不会有大量的（像其他语言编译器那么多的）时间用来进行优化，因 为与其他语言不同，JavaScript 的`编译过程不是发生在构建之前的`。
>对于 JavaScript 来说，大部分情况下编译发生在`代码执行前的几微秒`（甚至更短！）的时 间内。在我们所要讨论的作用域背后，JavaScript 引擎用尽了各种办法（比如 JIT，可以延 迟编译甚至实施重编译）来保证性能最佳。
>简单地说，任何 JavaScript 代码片段`在执行前都要进行编译`（通常就在执行前）。因此， JavaScript 编译器首先会对 var a = 2; 这段程序进行编译，然后做好执行它的准备，并且 通常马上就会执行它。

1.2 理解作用域

- 引擎
- 编译器
- 作用域
